<!DOCTYPE html>
<html>
<head>

<!--[if lt IE 9]><script src="./excanvas.min.js"></script><![endif]-->
	<title>Sky Survey</title>
  	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1">
  	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<link href="css/chardinjs.css" rel="stylesheet">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="http://www.parsecdn.com/js/parse-latest.js"></script>
	<script src="chardinjs.min.js"></script>

<!--
<style>
	body {
		background: #fff;
		font-family: Helvetica, sans-serif;
		color: black;
	}
	li.options .i {
		clear: both;
		min-height: 2em;
	}
	li.options .p {
		display: inline-block;
		width: 10em;
	}
	li.options .o {
		display: inline-block;
		margin-right: 16px;
	}
	li.options .h {
		margin-bottom: 1em;
		display: inline-block;
		opacity: 0.2;
		filter: alpha(20);
	}
	li.options .i:hover .h {
		opacity: 0.7;
		filter: alpha(70);
	}
</style>-->
<!--<script src="jquery-1.10.0.min.js"></script>-->
<style>
    body {
        font: 400 15px Lato, sans-serif;
        line-height: 1.8;
        color: #818181;
    }
h2 {
    font-size: 24px;
    text-transform: uppercase;
    color: #303030;
    font-weight: 600;
    margin-bottom: 30px;
}
h4 {
    font-size: 19px;
    line-height: 1.375em;
    color: #303030;
    font-weight: 400;
    margin-bottom: 30px;
}
.jumbotron {
    background-color: #3F2A5E;
    color: #fff;
    padding: 100px 25px;
    font-family: Montserrat, sans-serif;
}
.container-fluid {
    padding:60px 50px;
}
.bg-grey {
    background-color: #f6f6f6;
}
.logo-small {
    color: #f4511e;
    font-size: 50px;
}
.logo {
    color: #f4511e;
    font-size: 200px;
}
.thumbnail {
    padding: 0 0 15px 0;
    border: none;
    border-radius: 0;
}
.thumbnail img {
    width: 100%;
    height: 100%;
    margin-bottom: 10px;
}
.item h4 {
    font-size: 19px;
    line-height: 1.375em;
    font-weight: 400;
    font-style: italic;
    margin: 70px 0;
}
.item span {
    font-style: normal;
}
.panel {
    border: 1px solid #f4511e;
    border-radius:0 !important;
    transition: box-shadow 0.5s;
}
.panel:hover {
    box-shadow: 5px 0px 40px rgba(0,0,0, .2);
}
.panel-footer .btn:hover {
    border: 1px solid #f4511e;
    background-color: #fff !important;
    color: #f4511e;
}
.panel-heading {
    color: #fff !important;
    background-color: #f4511e !important;
    padding: 25px;
    border-bottom: 1px solid transparent;
    border-top-left-radius: 0px;
    border-top-right-radius: 0px;
    border-bottom-left-radius: 0px;
    border-bottom-right-radius: 0px;
}
.panel-footer {
    background-color: white !important;
}
.panel-footer h3 {
    font-size: 32px;
}
.panel-footer h4 {
    color: #aaa;
    font-size: 14px;
}
.panel-footer .btn {
    margin: 15px 0;
    background-color: #f4511e;
    color: #fff;
}
.navbar {
    margin-bottom: 0;
    background-color: #3F2A5E;
    z-index: 9999;
    border: 0;
    font-size: 12px !important;
    line-height: 1.42857143 !important;
    letter-spacing: 4px;
    border-radius: 0;
    font-family: Montserrat, sans-serif;
}
.navbar li a, .navbar .navbar-brand {
    color: #fff !important;
}
.navbar-nav li a:hover, .navbar-nav li.active a {
    color: #3F2A5E !important;
    background-color: #fff !important;
}
.navbar-default .navbar-toggle {
    border-color: transparent;
    color: #fff !important;
}
footer .glyphicon {
    font-size: 20px;
    margin-bottom: 20px;
    color: #f4511e;
}
@media screen and (max-width: 768px) {
    .col-sm-4 {
        text-align: center;
        margin: 25px 0;
    }
    .btn-lg {
        width: 100%;
        margin-bottom: 35px;
    }
}
@media screen and (max-width: 480px) {
    .logo {
        font-size: 150px;
    }
}
</style>

<script src="virtualsky.js" type="text/javascript"></script>

<script>
$(document).ready(function() {
// 		planetarium = $.virtualsky({id:'preview',width:500,height:350});
		window.onload = function(){
			skydefault = $.virtualsky({});
			$('.version').html(skydefault.version);
			planetarium = $.virtualsky({
				width: window.innerWidth,
				height: (window.innerHeight - 300),
                id: 'starmap1',
                projection: 'gnomic',
                latitude: 214,
                longitude: 53,
                negative: false,
                constellations: true,
                showstars: true,
                showplanets: true,
                keyboard: true,
                gridlines_az: false,
				gridlines_eq: false,
				gridlines_gal: false

//                 fov: '50'
        	});
			planetarium.draw();
			update();


//         planetarium.addPointer({
//         	'ra':152.75,
//             'dec':.25,
//             'label':'Test Box',
//             'img':'https://pbs.twimg.com/profile_images/378800000822867536/3f5a00acf72df93528b6bb7cd0a4fd0c.jpeg',
//             'url':'http://aegis.ucolick.org/tech_overview.html',
//             'credit':'Wikisky',
//             'colour':'rgb(255,220,220)'
//         })


		   planetarium.addPointer({
			   'ra':265,
			   'dec':29,
			   'label':'SDSS',
			   'colour':'rgb(255,220,220)'
		   })

		   planetarium.addPointer({
			   'ra':237.5,
			   'dec':4,
			   'label':'VISTA:KIDS',
			   'colour':'rgb(255,220,220)'
		   })

		   planetarium.addPointer({
			   'ra':50,
			   'dec':-22,
			   'label':'VISTA:KIDS',
			   'colour':'rgb(255,220,220)'
		   })

		   planetarium.addPointer({
			   'ra':60,
			   'dec':-17,
			   'label':'VISTA:ATLAS',
			   'colour':'rgb(255,220,220)'
		   })

		   planetarium.addPointer({
			   'ra':232.5,
			   'dec':-8,
			   'label':'VISTA:ATLAS',
			   'colour':'rgb(255,220,220)'
		   })

		   planetarium.addPointer({
			   'ra':102.5,
			   'dec':-30,
			   'label':'VISTA:DES',
			   'colour':'rgb(255,220,220)'
		   })

		   planetarium.addPointer({
			   'ra':50,
			   'dec':0.1,
			   'label':'VISTA:DES',
			   'colour':'rgb(255,220,220)'
		   })

		   planetarium.addPointer({
			   'ra':30.2,
			   'dec':-8,
			   'label':'GAMMA:G02',
			   'colour':'rgb(255,220,220)'
		   })

		   planetarium.addPointer({
			   'ra':141,
			   'dec':3,
			   'label':'GAMMA:G09',
			   'colour':'rgb(255,220,220)'
		   })

		   planetarium.addPointer({
			   'ra':174,
			   'dec':2,
			   'label':'GAMMA:G12',
			   'colour':'rgb(255,220,220)'
		   })

		   planetarium.addPointer({
			   'ra':211.5,
			   'dec':3,
			   'label':'GAMMA:G15',
			   'colour':'rgb(255,220,220)'
		   })

		   planetarium.addPointer({
			   'ra':351,
			   'dec':-30,
			   'label':'GAMAMA:G23',
			   'colour':'rgb(255,220,220)'
		   })


		   planetarium.addPointer({
			   'ra':214.75,
			   'dec':52.75,
			   'label':'AEGIS Surveys',
			   'img':'http://localhost/~Nicky/VirtualSky-master/Metadata/AegisSurveyMetadata.jpg',
			   'url':'http://localhost/~Nicky/VirtualSky-master/Metadata/AegisSurveyMetadata.pdf',
			   'credit':'AEGIS',
			   'colour':'rgb(255,220,220)'
		   })

	//         $('button#testbox').on('click',function(){
	//                 planetarium.panTo(152.75,0.25,3000)
	//         });
			
		 //  	var options = $("#options");
			// $.each(result, function() {
			//     options.append($("<option />").val(this.ImageFolderID).text(this.Name));
			// });

		   $('button#locate').on('click',function(){
		   		   coords = $("#surveyOpts").val().split(",")

		   		   console.log(coords)

				   planetarium.panTo(parseFloat(coords[0]),parseFloat(coords[1]),3000)
		   });

		   $('body').chardinJs('start');

        };
});

function update(el) {
			property = (el) ? el.name : "";
			value = (el) ? el.value : "";

			planetarium.draw();

			var str = "<iframe width=\""+planetarium.wide+"\" height=\""+planetarium.tall+"\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\" src=\"";
			var uri = "http://lcogt.net/virtualsky/embed/?";
			uri += "longitude="+(planetarium.longitude*planetarium.r2d);
			uri += "&latitude="+(planetarium.latitude*planetarium.r2d);

			if(skydefault.showgalaxy != planetarium.showgalaxy) uri += "&showgalaxy="+planetarium.showgalaxy;

			str += encodeURI(uri);
			str += "\" allowTransparency=\"true\"></iframe>";

			el = document.getElementById('embedcode');
// 			el.value = str;


}
</script>

</head>

<body id="home">

<!-- Navbar -->
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#home">Sky Survey</a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#home">HOME</a></li>
                <li><a href="upload.html">UPLOAD SURVEY</a></li>
                <li><a href="contact.html">CONTACT</a></li>
            </ul>
        </div>
    </div>
</nav>

<!-- Headline and Introduction -->
<div class="jumbotron text-center">
    <h1>Sky Survey</h1>
    <p>a collective database of survey coverage maps and metadata from  telescopes around the world</p>
</div>

<div class="text-center">

<!-- Insert Map Here -->
    <div id="starmap1" class="center-block" data-intro="<h3><b>The Skymap!</b> The <i>boxes are surveys</i>, with their names displayed along their edges. Drag your mouse to navigate the map. Enjoy!</h3>" data-position="top"></div>
<!-- <button id="testbox">Move to The Test Box</button> -->
    <div class="btn-group" align="center" style="padding:60px" data-intro="<h3><b>Controls</b> for the map. Toggle visual aspects according to your need.</h3>" data-position="right">
        <select class="form-control" id="surveyOpts">
 	 	</select>
 	 	<button type="button" class="btn btn-default" id="locate">Locate</button>
 	  	<!-- Attempt to create popover with image of metadata -->
		<!-- <a href="#" id="popoverExample" data-html="true" data-toggle="popover" data-placement="top" data-content=""> Popover Example </a> -->
   		<!-- Attempt to create zoom buttons -->
   		<input type="button" value ="-" onclick="zoom(0.9)"/>
  		<input type="button" value ="+" onclick="zoom(1.1)"/>
    </div>
</div>

<!-- Map Display Options -->
<div class="container-fluid bg-grey">
<form>
<ol>
	<li class="options">
		<div class="i">
			<div class="p">Show Survey Boxes?</div>
			<div class="o">
			<input type="radio" name="showgalaxy" value="true" onChange="update(this)" checked /> Yes
			<input type="radio" name="showgalaxy" value="false" onChange="update(this)"  /> No
			</div>
		</div>
	</li>

</ol>
</form>
</div>

</body>
</html>
